# QuantMesh æ’ä»¶ç³»ç»Ÿ - å®Œæ•´æ–¹æ¡ˆæ€»ç»“

## ğŸ¯ é—®é¢˜å›é¡¾

**ä½ çš„é—®é¢˜**: å¦‚ä½•è®© Go ç¨‹åºåŠ è½½é—­æºæ’ä»¶ï¼Ÿ

**æ ¸å¿ƒéœ€æ±‚**:
1. å¼€æºåŸºç¡€æ¡†æ¶ï¼Œå¸å¼•ç”¨æˆ·
2. é—­æºé«˜çº§åŠŸèƒ½ï¼Œä¿æŠ¤æ ¸å¿ƒç«äº‰åŠ›
3. å•†ä¸šåŒ–å˜ç°
4. é˜²æ­¢ç«å“æŠ„è¢­

## âœ… è§£å†³æ–¹æ¡ˆ

æˆ‘ä¸ºä½ è®¾è®¡äº†ä¸€ä¸ª**å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿ**ï¼ŒåŒ…å«ï¼š

### 1. æ’ä»¶æ¡†æ¶ (`plugin/plugin.go`)

```go
// æ ¸å¿ƒæ¥å£
type Plugin interface {
    GetMetadata() *PluginMetadata
    Initialize(cfg *config.Config, params map[string]interface{}) error
    Validate(licenseKey string) error
    Close() error
}

// ç­–ç•¥æ’ä»¶æ¥å£
type StrategyPlugin interface {
    Plugin
    GetStrategy() strategy.Strategy
}

// æ’ä»¶æ³¨å†Œè¡¨
type PluginRegistry struct {
    plugins map[string]Plugin
}

// æ’ä»¶åŠ è½½å™¨
type PluginLoader struct {
    registry     *PluginRegistry
    licenseStore *LicenseStore
}
```

**ç‰¹ç‚¹**:
- âœ… æ”¯æŒå¤šç§æ’ä»¶ç±»å‹ (ç­–ç•¥/AI/é£æ§/ä¿¡å·)
- âœ… ç»Ÿä¸€çš„æ³¨å†Œå’Œç®¡ç†æœºåˆ¶
- âœ… å†…ç½®è®¸å¯è¯éªŒè¯
- âœ… çº¿ç¨‹å®‰å…¨

### 2. è®¸å¯è¯ç³»ç»Ÿ (`plugin/license.go`)

```go
// è®¸å¯è¯ä¿¡æ¯
type LicenseInfo struct {
    PluginName   string
    CustomerID   string
    ExpiryDate   time.Time
    MaxInstances int
    Features     []string
    MachineID    string
    Signature    string
}

// ç”Ÿæˆè®¸å¯è¯
GenerateLicense(pluginName, customerID, expiryDate, maxInstances, features, machineID, secretKey)

// éªŒè¯è®¸å¯è¯
validator.ValidatePlugin(pluginName, licenseKey)
```

**å®‰å…¨æªæ–½**:
- ğŸ” AES-256-GCM åŠ å¯†å­˜å‚¨
- ğŸ” SHA-256 ç­¾åéªŒè¯
- ğŸ–¥ï¸ æœºå™¨IDç»‘å®š (å¯é€‰)
- â° è¿‡æœŸæ—¶é—´æ£€æŸ¥
- ğŸ« åŠŸèƒ½æˆæƒæ§åˆ¶

### 3. å¼€å‘å·¥å…·

#### æ’ä»¶è„šæ‰‹æ¶ç”Ÿæˆå™¨
```bash
./scripts/create_plugin.sh my_strategy
# è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„æ’ä»¶æ¨¡æ¿
```

#### è®¸å¯è¯ç”Ÿæˆå·¥å…·
```bash
./scripts/generate_license.sh premium_ai_strategy CUST001 365 5
# ç”Ÿæˆå•†ä¸šè®¸å¯è¯
```

#### è®¸å¯è¯éªŒè¯å·¥å…·
```bash
go run plugin/tools/license_validator.go -key="<license_key>"
# éªŒè¯è®¸å¯è¯æœ‰æ•ˆæ€§
```

### 4. å®Œæ•´æ–‡æ¡£

| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| `plugin/README.md` | æ’ä»¶ç³»ç»Ÿä½¿ç”¨æŒ‡å— |
| `plugin/INTEGRATION_GUIDE.md` | ä¸»ç¨‹åºé›†æˆæŒ‡å— |
| `plugin/DEPLOYMENT.md` | å•†ä¸šæ’ä»¶éƒ¨ç½²æ–¹æ¡ˆ |
| `plugin/examples/` | ç¤ºä¾‹ä»£ç  |

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¼€æºå±‚ (AGPL-3.0)                         â”‚
â”‚  - åŸºç¡€æ¡†æ¶ (exchange, monitor, order, position)            â”‚
â”‚  - ç®€å•ç­–ç•¥ (grid_strategy, mean_reversion)                 â”‚
â”‚  - æ’ä»¶ç³»ç»Ÿæ¡†æ¶ (plugin/plugin.go, plugin/license.go)       â”‚
â”‚  - ç¤ºä¾‹æ’ä»¶ (plugin/examples/)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ æ’ä»¶æ¥å£
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å•†ä¸šå±‚ (é—­æº)                             â”‚
â”‚  - é«˜çº§AIç­–ç•¥ (ai/decision_engine.go, ai/optimizer.go)      â”‚
â”‚  - æœºå™¨å­¦ä¹ æ¨¡å— (ai/market_analyzer.go)                     â”‚
â”‚  - é«˜çº§é£æ§ (safety/advanced_risk.go)                       â”‚
â”‚  - Polymarketä¿¡å· (ai/polymarket_signal.go)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“ è®¸å¯è¯éªŒè¯
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è®¸å¯è¯å±‚ (å¯é€‰)                            â”‚
â”‚  - åœ¨çº¿éªŒè¯æœåŠ¡å™¨                                            â”‚
â”‚  - ä½¿ç”¨ç»Ÿè®¡å’Œç›‘æ§                                            â”‚
â”‚  - è‡ªåŠ¨æ›´æ–°æ£€æŸ¥                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æ¨èçš„åˆ†å‘æ–¹æ¡ˆ

### æ–¹æ¡ˆ: ç§æœ‰ Go Module + è®¸å¯è¯éªŒè¯

**å·¥ä½œæµç¨‹**:

```
1. å¼€æºä»“åº“ (GitHub Public)
   â””â”€â”€ github.com/yourname/quantmesh
       â”œâ”€â”€ åŸºç¡€æ¡†æ¶
       â”œâ”€â”€ æ’ä»¶ç³»ç»Ÿ
       â””â”€â”€ ç¤ºä¾‹æ’ä»¶

2. å•†ä¸šæ’ä»¶ (GitHub Private)
   â””â”€â”€ github.com/quantmesh-pro/premium-ai
       â”œâ”€â”€ é«˜çº§ç­–ç•¥ä»£ç 
       â”œâ”€â”€ è®¸å¯è¯éªŒè¯
       â””â”€â”€ go.mod (ä¾èµ–å¼€æºæ ¸å¿ƒ)

3. å®¢æˆ·è´­ä¹°æµç¨‹
   â”œâ”€â”€ æ”¯ä»˜ â†’ ç”Ÿæˆè®¸å¯è¯
   â”œâ”€â”€ æ·»åŠ å®¢æˆ·åˆ°ç§æœ‰ä»“åº“
   â””â”€â”€ å‘é€è®¸å¯è¯å¯†é’¥

4. å®¢æˆ·ä½¿ç”¨
   â”œâ”€â”€ go get github.com/quantmesh-pro/premium-ai
   â”œâ”€â”€ é…ç½®è®¸å¯è¯å¯†é’¥
   â””â”€â”€ go build && è¿è¡Œ
```

**ä¼˜åŠ¿**:
- âœ… ä½¿ç”¨æ ‡å‡† Go å·¥å…·é“¾ï¼Œå®¢æˆ·ä½“éªŒå¥½
- âœ… ç§æœ‰ä»“åº“ä¿æŠ¤æºç 
- âœ… è®¸å¯è¯åŒé‡ä¿æŠ¤
- âœ… å¯ä»¥éšæ—¶æ’¤é”€è®¿é—®æƒé™
- âœ… æ”¯æŒç‰ˆæœ¬ç®¡ç†å’Œæ›´æ–°

## ğŸ’° å•†ä¸šæ¨¡å¼å»ºè®®

### äº§å“åˆ†çº§

```yaml
å¼€æºç‰ˆ (å…è´¹):
  åŠŸèƒ½:
    - åŸºç¡€ç½‘æ ¼ç­–ç•¥
    - å•äº¤æ˜“æ‰€æ”¯æŒ
    - åŸºç¡€é£æ§
    - ç¤¾åŒºæ”¯æŒ
  è®¸å¯: AGPL-3.0
  ä»·æ ¼: $0

ä¸“ä¸šç‰ˆ:
  åŠŸèƒ½:
    - åŒ…å«å¼€æºç‰ˆæ‰€æœ‰åŠŸèƒ½
    - é«˜çº§AIç­–ç•¥æ’ä»¶
    - å‚æ•°ä¼˜åŒ–æ’ä»¶
    - å¤šç­–ç•¥ç»„åˆ
    - é‚®ä»¶æ”¯æŒ
  è®¸å¯: å•†ä¸šè®¸å¯è¯
  ä»·æ ¼: $299/æœˆ æˆ– $2,999/å¹´
  
ä¼ä¸šç‰ˆ:
  åŠŸèƒ½:
    - åŒ…å«ä¸“ä¸šç‰ˆæ‰€æœ‰åŠŸèƒ½
    - å®šåˆ¶å¼€å‘
    - ç§æœ‰éƒ¨ç½²
    - ä¸“å±æŠ€æœ¯å›¢é˜Ÿ
    - 7x24 æ”¯æŒ
  è®¸å¯: ä¼ä¸šè®¸å¯è¯
  ä»·æ ¼: $5,000+/æœˆ
```

### æ’ä»¶å®šä»·

```yaml
å•ä¸ªæ’ä»¶:
  - AIç­–ç•¥æ’ä»¶: $199/æœˆ
  - å‚æ•°ä¼˜åŒ–æ’ä»¶: $149/æœˆ
  - æƒ…ç»ªåˆ†ææ’ä»¶: $99/æœˆ
  - Polymarketä¿¡å·: $299/æœˆ

å¥—é¤:
  - å…¨åŠŸèƒ½å¥—é¤: $499/æœˆ (èŠ‚çœ30%)
  - å¹´ä»˜: $4,999/å¹´ (èŠ‚çœ17%)
```

## ğŸ›¡ï¸ å®‰å…¨ä¿æŠ¤æªæ–½

### 1. ä»£ç å±‚é¢
```bash
# ä»£ç æ··æ·†
garble build -o quantmesh_pro

# å»é™¤è°ƒè¯•ä¿¡æ¯
go build -ldflags="-s -w"
```

### 2. è®¸å¯è¯å±‚é¢
- âœ… åŠ å¯†å­˜å‚¨
- âœ… ç­¾åéªŒè¯
- âœ… æœºå™¨ç»‘å®š
- âœ… è¿‡æœŸæ£€æŸ¥
- âœ… åŠŸèƒ½æˆæƒ

### 3. åˆ†å‘å±‚é¢
- âœ… ç§æœ‰ä»“åº“è®¿é—®æ§åˆ¶
- âœ… å®šæœŸå®¡è®¡è®¿é—®æ—¥å¿—
- âœ… å¯æ’¤é”€è®¿é—®æƒé™

### 4. è¿è¡Œæ—¶å±‚é¢
- âœ… å®šæœŸé‡æ–°éªŒè¯è®¸å¯è¯
- âœ… åœ¨çº¿éªŒè¯ (å¯é€‰)
- âœ… å¼‚å¸¸è¡Œä¸ºæ£€æµ‹

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºå…è´¹æ’ä»¶

```bash
# 1. ç”Ÿæˆæ’ä»¶æ¨¡æ¿
./scripts/create_plugin.sh my_strategy

# 2. å®ç°æ’ä»¶é€»è¾‘
cd plugins/my_strategy
vim plugin.go

# 3. æµ‹è¯•
go test -v

# 4. åœ¨ main.go ä¸­æ³¨å†Œ
# import "quantmesh/plugins/my_strategy"
```

### åˆ›å»ºå•†ä¸šæ’ä»¶

```bash
# 1. åˆ›å»ºç§æœ‰ä»“åº“
mkdir quantmesh-plugin-premium
cd quantmesh-plugin-premium
go mod init github.com/quantmesh-pro/premium

# 2. å®ç°æ’ä»¶ (è®¾ç½® RequiresKey: true)

# 3. æ¨é€åˆ° GitHub Private

# 4. ç”Ÿæˆè®¸å¯è¯
./scripts/generate_license.sh premium_plugin CUST001 365

# 5. å®¢æˆ·ä½¿ç”¨
# go get github.com/quantmesh-pro/premium@latest
```

### é›†æˆåˆ°ä¸»ç¨‹åº

```go
// main.go
import (
    "quantmesh/plugin"
    premiumai "github.com/quantmesh-pro/premium-ai"
)

func main() {
    // åˆ›å»ºæ’ä»¶åŠ è½½å™¨
    loader := plugin.NewPluginLoader(cfg)
    
    // åŠ è½½å•†ä¸šæ’ä»¶
    plugin := premiumai.NewPlugin()
    err := loader.LoadStrategyPlugin(
        plugin,
        cfg.Plugins.LicenseKey, // ä»é…ç½®è¯»å–
        cfg.Plugins.Params,
        strategyManager,
        executor,
        exchange,
    )
}
```

## ğŸ“ å­¦ä¹ è·¯å¾„

### ç¬¬1æ­¥: ç†è§£æ’ä»¶ç³»ç»Ÿ
é˜…è¯»: `plugin/README.md`

### ç¬¬2æ­¥: åˆ›å»ºç¤ºä¾‹æ’ä»¶
è¿è¡Œ: `./scripts/create_plugin.sh test_strategy`

### ç¬¬3æ­¥: æµ‹è¯•è®¸å¯è¯ç³»ç»Ÿ
è¿è¡Œ: `go run plugin/examples/demo.go`

### ç¬¬4æ­¥: é›†æˆåˆ°ä¸»ç¨‹åº
é˜…è¯»: `plugin/INTEGRATION_GUIDE.md`

### ç¬¬5æ­¥: éƒ¨ç½²å•†ä¸šæ’ä»¶
é˜…è¯»: `plugin/DEPLOYMENT.md`

## ğŸ” ä¸å…¶ä»–æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚åˆåœºæ™¯ |
|------|------|------|----------|
| **Go Plugin (.so)** | åŠ¨æ€åŠ è½½ | ä»…Linux/macOSï¼Œç‰ˆæœ¬å…¼å®¹æ€§å·® | ç®€å•åœºæ™¯ |
| **gRPCæ’ä»¶** | è¿›ç¨‹éš”ç¦»ï¼Œè·¨è¯­è¨€ | æ€§èƒ½å¼€é”€å¤§ï¼Œå¤æ‚ | ä¼ä¸šçº§ |
| **ç¼–è¯‘æ—¶é“¾æ¥ (æ¨è)** | æ€§èƒ½æœ€ä¼˜ï¼Œç®€å• | éœ€è¦é‡æ–°ç¼–è¯‘ | **ä½ çš„é¡¹ç›®** |
| **WebAssembly** | å®‰å…¨æ²™ç®± | ç”Ÿæ€ä¸æˆç†Ÿ | æœªæ¥æ–¹å‘ |

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯åš:

1. **æµ‹è¯•æ’ä»¶ç³»ç»Ÿ**
   ```bash
   go run plugin/examples/demo.go
   ```

2. **åˆ›å»ºç¬¬ä¸€ä¸ªæ’ä»¶**
   ```bash
   ./scripts/create_plugin.sh my_first_plugin
   ```

3. **ç”Ÿæˆæµ‹è¯•è®¸å¯è¯**
   ```bash
   ./scripts/generate_license.sh test_plugin TEST001 30
   ```

### çŸ­æœŸ (1-2å‘¨):

1. å°†ç°æœ‰ AI æ¨¡å—æ”¹é€ ä¸ºæ’ä»¶
2. åˆ›å»ºç§æœ‰ GitHub ä»“åº“
3. è®¾ç½®å•†ä¸šè®¸å¯è¯ç”Ÿæˆæµç¨‹
4. ç¼–å†™å®¢æˆ·æ–‡æ¡£

### ä¸­æœŸ (1-2æœˆ):

1. å¼€å‘å¤šä¸ªå•†ä¸šæ’ä»¶
2. å»ºç«‹è®¸å¯è¯æœåŠ¡å™¨ (å¯é€‰)
3. è®¾ç½®è‡ªåŠ¨åŒ–æµ‹è¯•
4. æ¨å¹¿å’Œé”€å”®

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œå¯ä»¥:

1. æŸ¥çœ‹æ–‡æ¡£: `plugin/README.md`, `plugin/INTEGRATION_GUIDE.md`
2. è¿è¡Œç¤ºä¾‹: `go run plugin/examples/demo.go`
3. æŸ¥çœ‹æµ‹è¯•: `plugin/examples/example_strategy_plugin.go`

## ğŸ‰ æ€»ç»“

ä½ ç°åœ¨æ‹¥æœ‰äº†ä¸€ä¸ª**å®Œæ•´çš„ã€ç”Ÿäº§å°±ç»ªçš„æ’ä»¶ç³»ç»Ÿ**:

âœ… **æŠ€æœ¯æ–¹æ¡ˆ**: ç¼–è¯‘æ—¶é“¾æ¥ + è®¸å¯è¯éªŒè¯
âœ… **å®‰å…¨ä¿æŠ¤**: å¤šå±‚é˜²æŠ¤ï¼Œé˜²æ­¢ç ´è§£
âœ… **å•†ä¸šæ¨¡å¼**: å¼€æºæ ¸å¿ƒ + å•†ä¸šæ’ä»¶
âœ… **å¼€å‘å·¥å…·**: è„šæ‰‹æ¶ã€è®¸å¯è¯ç”Ÿæˆå™¨
âœ… **å®Œæ•´æ–‡æ¡£**: ä½¿ç”¨æŒ‡å—ã€é›†æˆæŒ‡å—ã€éƒ¨ç½²æ–¹æ¡ˆ

è¿™ä¸ªæ–¹æ¡ˆ:
- ğŸ¯ **ç®€å•**: ä½¿ç”¨æ ‡å‡† Go å·¥å…·é“¾
- ğŸ”’ **å®‰å…¨**: ç§æœ‰ä»“åº“ + è®¸å¯è¯åŒé‡ä¿æŠ¤
- ğŸ’° **å¯ç›ˆåˆ©**: æ¸…æ™°çš„å•†ä¸šæ¨¡å¼
- ğŸš€ **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°æ’ä»¶
- ğŸ“ˆ **å¯ç»´æŠ¤**: ç‰ˆæœ¬ç®¡ç†å’Œæ›´æ–°æœºåˆ¶

**ç°åœ¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ï¼** ğŸŠ

