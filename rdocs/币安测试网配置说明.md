# 币安测试网配置说明

## 概述

本系统支持币安测试网（Testnet）模式，允许您在不使用真实资金的情况下测试交易系统。

## 配置步骤

### 1. 获取币安测试网 API Key

1. 访问币安测试网：https://testnet.binancefuture.com/
2. 注册或登录测试网账户
3. 进入"API管理"页面
4. 创建新的 API Key 和 Secret Key
5. **重要**：确保这些 API Key 是从测试网账户创建的，不是主网账户

### 2. 配置 config.yaml

在 `config.yaml` 文件中，找到 `binance` 配置部分，添加 `testnet: true`：

```yaml
exchanges:
  binance:
    api_key: "YOUR_TESTNET_API_KEY"      # 测试网 API Key
    secret_key: "YOUR_TESTNET_SECRET"    # 测试网 Secret Key
    fee_rate: 0.0000                     # 手续费率
    testnet: true                        # 🔥 关键：设置为 true 启用测试网
```

### 3. 配置说明

- **`testnet: true`**：启用测试网模式
  - 系统会使用币安测试网的 API 端点
  - WebSocket 连接会指向测试网服务器
  - 所有交易操作都在测试网环境中执行

- **`testnet: false`** 或省略：使用主网模式
  - 系统使用币安主网 API
  - 所有交易操作使用真实资金

### 4. 验证配置

启动系统后，查看日志，应该能看到：

```
🌐 [Binance] 使用测试网模式
🌐 [Binance WS] 使用测试网 WebSocket: wss://stream.binancefuture.com/ws/...
```

## 测试网 vs 主网对比

| 特性 | 测试网 | 主网 |
|------|--------|------|
| **资金类型** | 虚拟测试币 | 真实货币（USDT） |
| **资金获取** | 免费无限获取 | 需要充值 |
| **交易结果** | 不影响真实资产 | 直接影响真实资产 |
| **API 端点** | testnet.binancefuture.com | api.binance.com |
| **WebSocket** | stream.binancefuture.com | fstream.binance.com |
| **风险** | 零风险 | 有真实资金风险 |

## 注意事项

### ⚠️ 重要提示

1. **API Key 匹配**：
   - 测试网 API Key 只能在测试网使用
   - 主网 API Key 只能在主网使用
   - 不要混用，否则会导致认证失败

2. **配置检查**：
   - 确保 `testnet: true` 与测试网 API Key 匹配
   - 确保 `testnet: false` 与主网 API Key 匹配

3. **数据隔离**：
   - 测试网和主网的数据完全隔离
   - 测试网的交易不会影响主网账户

4. **功能限制**：
   - 测试网可能在某些功能上与主网有差异
   - 建议在测试网充分测试后再切换到主网

## 切换模式

### 从测试网切换到主网

1. 在 `config.yaml` 中设置 `testnet: false`
2. 将 API Key 和 Secret Key 替换为主网的密钥
3. 重启系统

### 从主网切换到测试网

1. 在 `config.yaml` 中设置 `testnet: true`
2. 将 API Key 和 Secret Key 替换为测试网的密钥
3. 重启系统

## 获取测试币

1. 登录币安测试网：https://testnet.binancefuture.com/
2. 进入"资产"页面
3. 点击"充值"按钮
4. 选择测试币类型（如 USDT）
5. 输入充值数量（可随意填写，如 10000）
6. 确认充值

## 常见问题

### Q: 为什么连接失败？

A: 检查以下几点：
- 确认 `testnet: true` 配置正确
- 确认使用的是测试网 API Key（不是主网）
- 检查网络连接和代理设置

### Q: 测试网和主网可以同时使用吗？

A: 不可以。系统一次只能连接一个环境。如果需要切换，需要修改配置并重启系统。

### Q: 测试网的数据和主网一样吗？

A: 测试网使用真实的市场数据，但交易是虚拟的。价格、K线等数据与主网一致，但账户余额、持仓等是独立的。

## 技术支持

如有问题，请查看：
- 币安测试网文档：https://testnet.binancefuture.com/en/fapi/
- 项目文档：`rdocs/测试网说明.md`

