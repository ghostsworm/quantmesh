# 常见问题 FAQ

> **版本**: v3.3.2  
> **更新时间**: 2025-01-27

---

## 目录

1. [安装配置问题](#安装配置问题)
2. [运行使用问题](#运行使用问题)
3. [策略参数问题](#策略参数问题)
4. [风险相关问题](#风险相关问题)
5. [技术问题](#技术问题)

---

## 安装配置问题

### Q1: 如何安装 Go 语言？

**A:** 访问 [Go 官网](https://golang.org/dl/) 下载安装包，或使用包管理器：

```bash
# Ubuntu/Debian
sudo apt install golang-go

# macOS
brew install go

# 验证安装
go version
```

### Q2: 配置文件不存在怎么办？

**A:** 复制示例配置文件：

```bash
cp config.example.yaml config.yaml
# 然后编辑 config.yaml
```

### Q3: 如何配置 API 密钥？

**A:** 在 `config.yaml` 中配置：

```yaml
exchanges:
  binance:
    api_key: "YOUR_API_KEY"
    secret_key: "YOUR_API_SECRET"
    fee_rate: 0.0002
    testnet: false  # 首次使用建议设置为 true
```

**注意：**
- API 密钥需要具有交易权限
- 建议只开启合约交易权限，不要开启提币权限
- 首次使用建议在测试网测试

### Q4: 如何选择交易所？

**A:** 根据需求选择：

- **追求流动性**：Binance
- **追求低手续费**：Phemex（零手续费）或 Gate.io
- **需要批量操作**：Bitget
- **需要测试**：选择支持测试网的交易所

更多详情请参阅 [支持的交易所](./04-支持的交易所.md)。

### Q5: 如何配置多交易对？

**A:** 使用 `symbols` 配置：

```yaml
trading:
  symbols:
    - exchange: "binance"
      symbol: "ETHUSDT"
      price_interval: 2
      order_quantity: 30
    - exchange: "bitget"
      symbol: "BTCUSDT"
      price_interval: 10
      order_quantity: 50
```

---

## 运行使用问题

### Q6: 系统启动失败怎么办？

**A:** 检查以下内容：

1. **配置文件是否正确**
   ```bash
   # 检查配置文件语法
   cat config.yaml
   ```

2. **API 密钥是否正确**
   - 检查 API 密钥是否有效
   - 确认 API 密钥权限
   - 检查 IP 白名单设置

3. **网络连接**
   - 检查网络连接
   - 如果使用代理，设置环境变量：
     ```bash
     export https_proxy=http://127.0.0.1:7890
     export http_proxy=http://127.0.0.1:7890
     ```

4. **查看日志**
   ```bash
   tail -f logs/quantmesh.log
   ```

### Q7: 如何查看系统运行状态？

**A:** 有多种方式：

1. **查看日志**
   ```bash
   tail -f logs/quantmesh.log
   ```

2. **访问 Web 界面**
   ```
   http://localhost:28888
   ```

3. **查看控制台输出**
   - 系统会定期打印状态信息

### Q8: 如何停止系统？

**A:** 按 `Ctrl+C` 优雅退出，系统会：
- 撤销所有未完成订单（如果 `cancel_on_exit: true`）
- 停止所有协程
- 保存数据
- 关闭连接

### Q9: 如何重启系统？

**A:** 

1. **停止系统**：按 `Ctrl+C`
2. **重新启动**：
   ```bash
   go run main.go
   # 或
   ./quantmesh config.yaml
   ```

### Q10: Web 界面无法访问？

**A:** 检查以下内容：

1. **Web 服务是否启用**
   ```yaml
   web:
     enabled: true
     host: "0.0.0.0"
     port: 28888
   ```

2. **端口是否被占用**
   ```bash
   # 检查端口
   lsof -i :28888
   ```

3. **防火墙设置**
   - 检查防火墙是否允许端口访问
   - 如果部署在服务器，检查安全组设置

---

## 策略参数问题

### Q11: 如何设置 price_interval？

**A:** 根据币种波动性设置：

- **ETH**: 1-2 美元
- **BTC**: 5-10 美元
- **DOGE**: 0.0001 美元

**原则：**
- 太小：订单频繁成交，手续费成本高
- 太大：成交机会少，资金利用率低
- 建议：约为日均波动的 1-2%

### Q12: 如何设置 order_quantity？

**A:** 根据资金量设置：

**计算公式：**
```
总资金需求 = order_quantity × (buy_window_size + sell_window_size) × 杠杆倍数
```

**建议：**
- 首次使用：20-30 USDT
- 稳定运行：30-50 USDT
- 根据资金量逐步增加

### Q13: 如何设置窗口大小？

**A:** 根据资金量和价格波动范围设置：

**建议：**
- 首次使用：5-10
- 稳定运行：8-20
- 根据资金量调整

**原则：**
- 太小：覆盖范围小，可能错过机会
- 太大：占用保证金多，可能超出资金能力

### Q14: 为什么订单没有成交？

**A:** 可能原因：

1. **价格间隔太大**
   - 价格波动未达到网格间隔
   - 建议减小 `price_interval`

2. **使用 PostOnly 订单**
   - PostOnly 订单不会立即成交
   - 需要等待价格达到订单价格

3. **市场流动性差**
   - 选择主流交易对（BTC、ETH）
   - 避免选择流动性差的币种

### Q15: 如何提高盈利？

**A:** 建议：

1. **使用 Maker 订单**
   - 使用 PostOnly 订单
   - 可能获得手续费返还

2. **选择低手续费交易所**
   - Phemex（零手续费）
   - Gate.io（低手续费）

3. **提高 VIP 等级**
   - 刷交易量提升 VIP
   - 获得手续费优惠

4. **优化参数**
   - 根据市场情况调整 `price_interval`
   - 根据资金量调整 `order_quantity`

---

## 风险相关问题

### Q16: 系统安全吗？

**A:** 系统采用多层风控机制：

1. **启动前检查**：验证账户余额、杠杆倍数
2. **主动风控**：监控市场异常，自动暂停交易
3. **持仓对账**：定期同步本地与交易所状态
4. **订单清理**：自动清理过期订单

更多详情请参阅 [风控系统介绍](./05-风控系统.md)。

### Q17: 会爆仓吗？

**A:** 系统有保护机制：

1. **资金安全检查**
   - 启动前验证保证金充足
   - 确保可以安全持有至少 N 仓

2. **主动风控**
   - 检测到单边极速下跌
   - 自动暂停交易，撤销所有买单

3. **成本拉低**
   - 通过不断交易拉低成本
   - 只要回涨 50% 即可保本

**建议：**
- 不要投入全部资金
- 保留足够的保证金缓冲
- 启用风控功能

### Q18: 如何设置止损？

**A:** 系统目前没有内置止损功能，但可以通过以下方式：

1. **使用主动风控**
   - 监控市场异常
   - 自动暂停交易

2. **手动监控**
   - 定期检查持仓和盈亏
   - 必要时手动平仓

3. **设置合理的参数**
   - 设置合理的 `position_safety_check`
   - 确保有足够保证金缓冲

### Q19: 手续费会影响盈利吗？

**A:** 会，但可以通过以下方式降低影响：

1. **使用 Maker 订单**
   - 使用 PostOnly 订单
   - 可能获得手续费返还

2. **选择低手续费交易所**
   - Phemex（零手续费）
   - Gate.io（低手续费）

3. **提高 VIP 等级**
   - 刷交易量提升 VIP
   - 获得手续费优惠

4. **设置合理的 price_interval**
   - 不能太小，否则手续费成本高
   - 建议：确保价差利润 > 手续费成本

### Q20: 如何应对单边下跌？

**A:** 系统有保护机制：

1. **主动风控**
   - 检测到单边极速下跌
   - 自动暂停交易

2. **成本拉低**
   - 通过不断交易拉低成本
   - 只要回涨 50% 即可保本

3. **资金安全**
   - 3 万美元保证金可以保证下跌 1000 个点不爆仓
   - 设置合理的 `position_safety_check`

---

## 技术问题

### Q21: 编译失败怎么办？

**A:** 检查以下内容：

1. **Go 版本**
   ```bash
   go version  # 需要 1.21+
   ```

2. **依赖安装**
   ```bash
   go mod download
   ```

3. **SQLite 支持**
   ```bash
   # Ubuntu/Debian
   sudo apt install libsqlite3-dev
   
   # macOS
   brew install sqlite
   ```

### Q22: WebSocket 连接失败？

**A:** 可能原因：

1. **网络问题**
   - 检查网络连接
   - 如果使用代理，设置环境变量

2. **API 密钥问题**
   - 检查 API 密钥是否正确
   - 确认 API 密钥权限

3. **交易所问题**
   - 检查交易所服务状态
   - 查看交易所公告

### Q23: 订单状态不一致？

**A:** 系统有对账机制：

1. **自动对账**
   - 定期同步本地与交易所状态
   - 默认每 5 分钟

2. **手动检查**
   - 访问 Web 界面查看订单状态
   - 对比交易所实际订单

3. **修复不一致**
   - 系统会自动修复不一致
   - 必要时手动修复

### Q24: 如何查看日志？

**A:** 有多种方式：

1. **日志文件**
   ```bash
   tail -f logs/quantmesh.log
   ```

2. **Web 界面**
   - 访问 Web 界面
   - 查看日志页面

3. **控制台输出**
   - 系统会输出日志到控制台

### Q25: 如何更新系统？

**A:** 

1. **拉取最新代码**
   ```bash
   git pull origin main
   ```

2. **重新编译**
   ```bash
   go build -o quantmesh .
   ```

3. **重启系统**
   ```bash
   # 停止当前系统
   Ctrl+C
   
   # 重新启动
   ./quantmesh config.yaml
   ```

**注意：**
- 更新前建议备份配置文件
- 更新后检查配置是否兼容

---

## 其他问题

### Q26: 支持哪些交易对？

**A:** 支持各交易所的永续合约交易对，建议选择：

- 主流币种（BTC、ETH 等）
- 流动性好的交易对
- 避免选择波动性过大的币种

### Q27: 可以同时交易多个交易对吗？

**A:** 可以，使用多交易对配置：

```yaml
trading:
  symbols:
    - exchange: "binance"
      symbol: "ETHUSDT"
      ...
    - exchange: "bitget"
      symbol: "BTCUSDT"
      ...
```

### Q28: 如何联系技术支持？

**A:** 

- **GitHub Issues**: https://github.com/dennisyang1986/quantmesh_market_maker/issues
- **Email**: commercial@quantmesh.io
- **Website**: https://quantmesh.io

### Q29: 系统是免费的吗？

**A:** 系统采用双许可模式：

1. **AGPL-3.0 开源许可**
   - 免费使用、修改和分发
   - 所有衍生作品必须开源

2. **商业许可**
   - 专有使用需要购买商业许可证
   - 包括优先技术支持

### Q30: 如何贡献代码？

**A:** 

1. Fork 项目
2. 创建功能分支
3. 提交更改
4. 创建 Pull Request

更多详情请查看项目 GitHub 页面。

---

## 获取帮助

如果以上问题无法解决，可以：

1. **查看文档**
   - 阅读完整文档
   - 查看技术文档

2. **查看日志**
   - 检查错误日志
   - 分析问题原因

3. **联系支持**
   - GitHub Issues
   - Email 支持

---

## 下一步

- 📖 [系统介绍](./01-系统介绍.md) - 了解系统概述
- 🚀 [快速入门](./02-快速入门.md) - 开始使用系统
- 📊 [网格交易策略](./03-网格交易策略.md) - 深入了解策略

---

*如有其他问题，请查看文档或联系技术支持。*

